"""
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è Legal Policy
–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥—É–ª—è –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ
"""

class LegalPolicySettings:
    """–ö–ª–∞—Å—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–¥—É–ª—è –ø—Ä–∞–≤–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"""
    # –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è
    ENABLED = True
    # URL –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è
    TERMS_OF_SERVICE_URL = ""
    
    # URL –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏  
    PRIVACY_POLICY_URL = ""
    
    # ========== –ù–ê–°–¢–†–û–ô–ö–ò –ö–ù–û–ü–û–ö ==========
    
    # –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è
    TERMS_BUTTON_TEXT = "üìã –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ"
    
    # –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
    PRIVACY_BUTTON_TEXT = "üîí –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏"
    
    # ========== –ù–ê–°–¢–†–û–ô–ö–ò –í–ï–ë–ê –ò –ú–ò–ù–ò-–ü–†–ò–õ–û–ñ–ï–ù–ò–ô ==========
    
    # –í–∫–ª—é—á–µ–Ω–∏–µ WebApp –∫–Ω–æ–ø–æ–∫ (–±—É–¥—É—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –≤ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤–º–µ—Å—Ç–æ –±—Ä–∞—É–∑–µ—Ä–∞)
    USE_WEBAPP_BUTTONS = True
    
    # URL –¥–ª—è WebApp –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è (–µ—Å–ª–∏ USE_WEBAPP_BUTTONS = True)
    # –ï—Å–ª–∏ –ø—É—Å—Ç–æ, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è TERMS_OF_SERVICE_URL
    TERMS_WEBAPP_URL = ""
    
    # URL –¥–ª—è WebApp –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ USE_WEBAPP_BUTTONS = True)
    # –ï—Å–ª–∏ –ø—É—Å—Ç–æ, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è PRIVACY_POLICY_URL
    PRIVACY_WEBAPP_URL = ""
    
    # ========== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò ==========
    
    # –ü–æ–∑–∏—Ü–∏—è –∫–Ω–æ–ø–æ–∫ –≤ –º–µ–Ω—é ("top" - –≤–≤–µ—Ä—Ö—É, "bottom" - –≤–Ω–∏–∑—É –æ—Ç –¥—Ä—É–≥–∏—Ö –∫–Ω–æ–ø–æ–∫)
    BUTTONS_POSITION = "top"
    
    # –î–æ–±–∞–≤–ª—è—Ç—å –ª–∏ –∫–Ω–æ–ø–∫–∏ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É (True) –∏–ª–∏ –≤ —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (False)
    BUTTONS_INLINE = False
    
    # ========== –í–ê–õ–ò–î–ê–¶–ò–Ø –ù–ê–°–¢–†–û–ï–ö ==========
    
    @classmethod
    def validate(cls):
        """–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–¥—É–ª—è"""
        errors = []
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ URL –µ—Å–ª–∏ –º–æ–¥—É–ª—å –≤–∫–ª—é—á–µ–Ω
        if cls.ENABLED:
            if not cls.TERMS_OF_SERVICE_URL:
                errors.append("TERMS_OF_SERVICE_URL –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º –º–æ–¥—É–ª–µ")
            
            if not cls.PRIVACY_POLICY_URL:
                errors.append("PRIVACY_POLICY_URL –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º –º–æ–¥—É–ª–µ")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å URL
            for url_name, url_value in [
                ("TERMS_OF_SERVICE_URL", cls.TERMS_OF_SERVICE_URL),
                ("PRIVACY_POLICY_URL", cls.PRIVACY_POLICY_URL),
                ("TERMS_WEBAPP_URL", cls.TERMS_WEBAPP_URL),
                ("PRIVACY_WEBAPP_URL", cls.PRIVACY_WEBAPP_URL)
            ]:
                if url_value and not (url_value.startswith('http://') or url_value.startswith('https://')):
                    errors.append(f"{url_name} –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å http:// –∏–ª–∏ https://")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫
            if not cls.TERMS_BUTTON_TEXT.strip():
                errors.append("TERMS_BUTTON_TEXT –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
            
            if not cls.PRIVACY_BUTTON_TEXT.strip():
                errors.append("PRIVACY_BUTTON_TEXT –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∫–Ω–æ–ø–æ–∫
            if cls.BUTTONS_POSITION not in ["top", "bottom"]:
                errors.append("BUTTONS_POSITION –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 'top' –∏–ª–∏ 'bottom'")
        
        if errors:
            raise ValueError(f"–û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Legal Policy –º–æ–¥—É–ª—è:\n" + "\n".join(f"- {error}" for error in errors))
        
        return True
    
    @classmethod
    def get_effective_webapp_urls(cls):
        """–ü–æ–ª—É—á–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ WebApp URL (—Å fallback –Ω–∞ –æ–±—ã—á–Ω—ã–µ URL)"""
        terms_webapp = cls.TERMS_WEBAPP_URL if cls.TERMS_WEBAPP_URL else cls.TERMS_OF_SERVICE_URL
        privacy_webapp = cls.PRIVACY_WEBAPP_URL if cls.PRIVACY_WEBAPP_URL else cls.PRIVACY_POLICY_URL
        
        return terms_webapp, privacy_webapp
